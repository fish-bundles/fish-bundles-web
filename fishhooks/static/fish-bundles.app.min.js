var CreateCtrl, MainCtrl, bundleMainTemplate, ctrl, markdownTemplate;

MainCtrl = (function() {
  function MainCtrl(test) {
    this.test = test;
  }

  return MainCtrl;

})();

ctrl = new MainCtrl("b");

markdownTemplate = "Introduction\n------------\n\nThis bundle does something cool.\n\nUsage\n-----\n\ninstall with fish-bundles by adding to your `fish-bundles-list.fish` file:\n\n    set -gx _fish_bundles_list $_fish_bundles_list '<user>/<bundle-name>'\n\nProvided Functions\n------------------\n\nThis bundle comes with the following functions:\n\n* does-something-nice - does something nice with the given $argv\n* does-other-thing - otherify the thingy in the filesystem";

bundleMainTemplate = "function my-function\n    echo Hello $argv\nend";

CreateCtrl = (function() {
  function CreateCtrl(element) {
    this.element = element;
    this.initializeCodeMirror();
  }

  CreateCtrl.prototype.initializeCodeMirror = function() {
    var el, extras;
    extras = {
      'F11': function(cm) {
        return cm.setOption("fullScreen", !cm.getOption("fullScreen"));
      },
      'Esc': function(cm) {
        if (cm.getOption("fullScreen")) {
          return cm.setOption("fullScreen", false);
        }
      }
    };
    el = $('.plugin-main-fish', this.element)[0];
    this.mainMirror = this.createCodeMirror(el, 'shell', extras, bundleMainTemplate);
    extras['Enter'] = 'newlineAndIndentContinueMarkdownList';
    el = $('.readme-md', this.element)[0];
    return this.readmeMirror = this.createCodeMirror(el, 'markdown', extras, markdownTemplate);
  };

  CreateCtrl.prototype.createCodeMirror = function(el, mode, extraKeys, value) {
    return CodeMirror(el, {
      mode: mode,
      lineNumbers: true,
      theme: 'monokai',
      extraKeys: extraKeys,
      styleActiveLine: true,
      value: value
    });
  };

  return CreateCtrl;

})();

ctrl = new CreateCtrl($('.create-bundle'));
